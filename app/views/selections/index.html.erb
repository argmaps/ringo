<%= page_header_title 'Highlights' %>

<div class="row">
  <div class="col-sm-12">
    <div class="box bordered-box blue-border" style="margin-bottom:0;">
      <div class="box-content box-no-padding">
        <div class="responsive-table">
          <div class="scrollable-area">
            <table class="table" style="margin-bottom:0;">
              <thead>
                <tr>
                  <th>
                    Content
                  </th>
                  <th>
                    Saved
                  </th>
                  <th>
                  </th>
                </tr>
              </thead>
              <tbody>
                <% i = 0 %>
                <% @selections.each do |selection| %>
                  <% i += 1 %>
                  <tr>
                    <td>
                      <p id="selection<%= i %>"><%= selection.content %></p>
                      <%= link_to selection.web_page.uri %></td>
                    </td>
                    <td><%= selection.created_at.in_time_zone.strftime('%_m/%d/%y') %></time></td>

                    <td>
                      <div class="text-right">
                        <button class="btn btn-xs copy-to-clipboard" data-clipboard-target='selection<%= i %>' title='Copy highlight to clipboard.'>
                          <i class="icon-copy"></i> Copy
                        </button>

                        <%= link_to nil, class: 'btn btn-danger btn-xs', href: '#' do %>
                          <i class="icon-remove"></i>
                        <% end %>
                      </div>
                    </td>
                  </tr>
                <% end %>
              </tbody>
            </table>
          </div>
        </div>

      </div>
    </div>

  </div>
</div>

<% content_for :scripts do %>
<script>
  $(document).ready(function() {
    new ZeroClipboard($('.copy-to-clipboard'));
  });
</script>
<% end %>
